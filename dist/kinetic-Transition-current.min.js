Kinetic.Transition=function(a,b){function d(a,b,e){for(var f in a)f!=="duration"&&f!=="easing"&&f!=="callback"&&(Kinetic.Type._isObject(a[f])?(e[f]={},d(a[f],b[f],e[f])):c._add(c._getTween(b,f,a[f],e)))}this.node=a,this.config=b,this.tweens=[];var c=this,e={};d(b,a.attrs,e);var f=0;for(var g=0;g<this.tweens.length;g++){var h=this.tweens[g];h.onFinished=function(){f++,f>=c.tweens.length&&c.onFinished()}}},Kinetic.Transition.prototype={start:function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].start()},stop:function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].stop()},resume:function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].resume()},_onEnterFrame:function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].onEnterFrame()},_add:function(a){this.tweens.push(a)},_getTween:function(a,b,c,d){var e=this.config,f=this.node,g=e.easing;g===undefined&&(g="linear");var h=new Kinetic.Tween(f,function(a){d[b]=a,f.attrs[b]=a},Kinetic.Tweens[g],a[b],c,e.duration);return h}},Kinetic.Node.prototype.transitionTo=function(a){this.transAnim||(this.transAnim=new Kinetic.Animation);var b=this.nodeType==="Stage"?this:this.getLayer(),c=this,d=new Kinetic.Transition(this,a);return this.transAnim.func=function(){d._onEnterFrame()},this.transAnim.node=b,d.onFinished=function(){c.transAnim.stop(),a.callback&&a.callback()},d.start(),this.transAnim.start(),d};
